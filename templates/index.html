<!DOCTYPE html>
<html>
<head>
<title>BlackBox AI</title>
<style>
body{font-family:Arial;background:#eef;padding:30px}
.card{background:white;padding:20px;margin:20px;border-radius:10px}
button{background:red;color:white;padding:10px;border:none}
pre{background:black;color:#00ff00;padding:15px}
</style>
</head>

<body>

<h1>ðŸ›¡ BlackBox AI Threat Platform</h1>

<div class="card">
<button onclick="audit()">Run Audit</button>
<button onclick="download()">Download PDF</button>
</div>

<div class="card">
<h2>Live Result</h2>
<pre id="out">Waiting...</pre>
</div>

<div class="card">
<h2>Threat History</h2>
<table id="tbl" border="1"></table>
</div>

<div class="card">
<h2>Risk Chart</h2>
<img src="/chart" width="500">
</div>

<script>
function audit(){
fetch("/run_audit",{method:"POST"})
.then(r=>r.json())
.then(d=>{
out.innerText=
`CASE:${d.case}\nRisk:${d.risk}%\nLocation:${d.loc}\n\n`+
d.threats.join("\n");
load();
});
}

function load(){
fetch("/history").then(r=>r.json()).then(d=>{
let t="<tr><th>Case</th><th>Risk</th><th>Loc</th><th>Time</th></tr>";
d.forEach(r=>{
t+=`<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r[3]}</td></tr>`;
});
tbl.innerHTML=t;
});
}

function download(){window.location="/download";}
load();
</script>

</body>
</html>












